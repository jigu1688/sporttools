# 测试项目模块完善开发计划

## 一、功能需求分析

根据《国家学生体质健康标准》2014年修订版的要求，完善测试项目模块，预制各年级的具体测试项目，保留添加和编辑功能。

## 二、核心设计思路

1. **基于标准的项目预制**：根据《国家学生体质健康标准》中的单项指标与权重，生成各年级的具体测试项目表
2. **年级与性别关联**：测试项目与年级、性别关联，确保不同年级和性别的学生使用正确的测试项目
3. **保留灵活性**：在预制项目的基础上，保留添加、编辑和删除功能，允许学校根据实际情况自定义测试项目
4. **可视化配置**：提供直观的界面，方便用户查看和管理不同年级的测试项目

## 三、具体开发内容

### 1. 数据结构设计

**修改测试项目数据结构**，添加年级和性别关联字段：

```javascript
{
  id: 1,
  itemName: '身高',
  itemCode: 'height',
  itemType: 'required',
  unit: 'cm',
  minValue: 100,
  maxValue: 220,
  weight: 15,
  applicableGrades: ['一年级', '二年级', '三年级', '四年级', '五年级', '六年级', '初一', '初二', '初三', '高一', '高二', '高三', '大学一二年级', '大学三四年级'],
  applicableGenders: ['male', 'female'],
  isPreset: true // 标记是否为预制项目
}
```

### 2. 预制测试项目数据

根据《国家学生体质健康标准》2014年修订版，生成**各年级的预制测试项目**：

#### 2.1 共性指标（所有年级）

* 体重指数（BMI）：15%

* 肺活量：15%

* 50米跑：20%

#### 2.2 小学各年级特有指标

* **小学一、二年级**：

  * 坐位体前屈：30%

  * 1分钟跳绳：20%

* **小学三、四年级**：

  * 坐位体前屈：20%

  * 1分钟跳绳：20%

  * 1分钟仰卧起坐：10%

* **小学五、六年级**：

  * 坐位体前屈：10%

  * 1分钟跳绳：10%

  * 1分钟仰卧起坐：20%

  * 50米×8往返跑：10%

#### 2.3 初中、高中、大学各年级特有指标

* **初中、高中、大学**：

  * 坐位体前屈：10%

  * 立定跳远：10%

  * 引体向上（男）/1分钟仰卧起坐（女）：10%

  * 1000米跑（男）/800米跑（女）：20%

### 3. 测试项目配置界面优化

#### 3.1 年级筛选功能

* 添加年级选择器，允许用户查看不同年级的测试项目

* 支持多选年级，查看跨年级的测试项目

#### 3.2 项目列表展示优化

* 在项目列表中显示项目的适用年级和性别

* 标记预制项目，与自定义项目区分

* 支持按年级、性别、项目类型筛选项目

#### 3.3 编辑功能增强

* 允许编辑预制项目的权重、最小值、最大值等属性

* 保留删除功能，但对预制项目给出警告提示

* 支持批量编辑项目属性

### 4. 项目管理逻辑优化

#### 4.1 项目生成逻辑

* 初始化时自动生成所有年级的预制测试项目

* 确保每个年级的测试项目权重总和为100%

* 支持根据年级和性别自动筛选适用的测试项目

#### 4.2 数据验证增强

* 验证测试项目权重总和是否为100%

* 验证项目适用年级和性别的合理性

* 验证自定义项目的唯一性

## 四、技术实现要点

### 1. 状态管理优化

* 将测试项目数据从组件内部状态迁移到Redux状态管理

* 添加年级和性别筛选的状态管理

* 实现测试项目的异步加载和更新

### 2. 组件化设计

* 拆分测试项目配置组件，提高代码复用性

* 将年级筛选器、项目列表、项目编辑表单拆分为独立组件

* 实现组件间的通信和状态共享

### 3. 数据持久化

* 实现测试项目数据的本地存储

* 支持将自定义项目保存到后端

* 实现数据的导入和导出功能

## 五、预期效果

1. **完整的标准项目覆盖**：系统内置《国家学生体质健康标准》2014年修订版中所有年级的测试项目
2. **灵活的配置能力**：在预制项目的基础上，允许用户根据实际情况自定义测试项目
3. **直观的管理界面**：提供清晰的界面，方便用户查看和管理不同年级的测试项目
4. **准确的数据关联**：确保不同年级和性别的学生使用正确的测试项目
5. **良好的用户体验**：操作简单直观，减少用户的学习成本

## 六、开发步骤

1. **数据结构设计与修改**：修改测试项目数据结构，添加年级和性别关联字段
2. **预制项目生成**：根据《国家学生体质健康标准》生成各年级的预制测试项目
3. **界面优化**：添加年级筛选功能，优化项目列表展示
4. **功能增强**：增强编辑功能，支持批量操作
5. **逻辑优化**：优化项目生成和数据验证逻辑
6. **测试与调试**：进行功能测试和性能调试
7. **文档更新**：更新相关文档，说明新功能的使用方法

## 七、关键技术点

1. **年级与性别关联算法**：实现根据年级和性别自动筛选适用测试项目的算法
2. **权重总和验证**：确保每个年级的测试项目权重总和为100%
3. **预制项目与自定义项目的区分管理**：实现预制项目和自定义项目的不同处理逻辑
4. **组件化设计**：实现高内聚、低耦合的组件设计
5. **状态管理优化**：优化Redux状态管理，提高系统性能

## 八、注意事项

1. **标准准确性**：严格按照《国家学生体质健康标准》2014年修订版的要求生成预制项目
2. **灵活性与标准性平衡**：在遵循标准的同时，保持系统的灵活性，允许用户自定义项目
3. **用户体验**：确保界面直观易用，减少用户的学习成本
4. **数据完整性**：确保测试项目数据的完整性和准确性，避免数据丢失或错误
5. **性能优化**：优化系统性能，确保在处理大量测试项目时仍能保持良好的响应速度

