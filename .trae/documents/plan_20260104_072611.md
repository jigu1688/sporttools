## 成绩管理模块动态字段显示功能实现计划

### 需求分析
根据《国家体质健康标准》，不同学段的体测必测项目不同：
- **小学**：身高、体重、肺活量、50米跑、坐位体前屈、一分钟跳绳、一分钟仰卧起坐、50米×8往返跑
- **初高中**：身高、体重、肺活量、50米跑、坐位体前屈、立定跳远、引体向上(男)/一分钟仰卧起坐(女)、1000米跑(男)/800米跑(女)

### 实现方案

#### 1. 创建年级到学段的映射工具函数
- 在 `utils/` 目录下创建 `gradeMapping.js`
- 定义年级分组规则：
  - 小学组：一年级、二年级、三年级、四年级、五年级、六年级
  - 初中组：初一、初二、初三
  - 高中组：高一、高二、高三
- 提供 `getStageByGrade(grade)` 函数，根据年级返回所属学段

#### 2. 修改 ScoreManagement 组件
**表格列动态生成**：
- 根据学校 `schoolLevel` 设置决定整体学段
- 根据每行学生记录的 `grade` 字段确定具体适用项目
- 小学1-2年级：显示跳绳
- 小学3-4年级：显示跳绳、仰卧起坐
- 小学5-6年级：显示跳绳、仰卧起坐、50米×8往返跑
- 初中/高中：显示立定跳远、引体向上/仰卧起坐、1000米/800米

**编辑弹窗字段动态显示**：
- 根据当前编辑行的学生年级和性别动态生成表单字段
- 性别相关字段：男生显示引体向上、1000米跑；女生显示仰卧起坐、800米跑

#### 3. 技术实现要点
```javascript
// 小学必测项目配置
const primarySchoolItems = [
  { code: 'height', name: '身高(cm)', required: true },
  { code: 'weight', name: '体重(kg)', required: true },
  { code: 'vitalCapacity', name: '肺活量(ml)', required: true },
  { code: 'run50m', name: '50米跑(s)', required: true },
  { code: 'sitAndReach', name: '坐位体前屈(cm)', required: true },
  { code: 'ropeSkipping', name: '一分钟跳绳(个)', required: true, grades: ['一年级', '二年级', '三年级', '四年级', '五年级', '六年级'] },
  { code: 'sitUps', name: '一分钟仰卧起坐(个)', required: true, grades: ['三年级', '四年级', '五年级', '六年级'] },
  { code: 'run50m8x', name: '50米×8往返跑(s)', required: true, grades: ['五年级', '六年级'] }
]

// 初高中必测项目配置
const middleHighSchoolItems = [
  { code: 'height', name: '身高(cm)', required: true },
  { code: 'weight', name: '体重(kg)', required: true },
  { code: 'vitalCapacity', name: '肺活量(ml)', required: true },
  { code: 'run50m', name: '50米跑(s)', required: true },
  { code: 'sitAndReach', name: '坐位体前屈(cm)', required: true },
  { code: 'standingLongJump', name: '立定跳远(cm)', required: true },
  { code: 'pullUps', name: '引体向上(个)', required: true, gender: 'male' },
  { code: 'sitUps', name: '一分钟仰卧起坐(个)', required: true, gender: 'female' },
  { code: 'run1000m', name: '1000米跑(s)', required: true, gender: 'male' },
  { code: 'run800m', name: '800米跑(s)', required: true, gender: 'female' }
]
```

#### 4. 实现步骤
1. 创建 `utils/gradeMapping.js` - 年级到学段映射工具
2. 修改 `ScoreManagement.jsx`：
   - 添加 `getVisibleTestItems(grade, gender)` 函数
   - 动态生成表格列配置
   - 动态生成编辑弹窗表单字段
3. 测试验证功能正常

### 预期效果
- 不同年级学生显示不同的体测项目列
- 编辑弹窗根据学生年级和性别动态显示相应字段
- 符合《国家体质健康标准》的要求
- 学校学段设置影响整体字段显示逻辑